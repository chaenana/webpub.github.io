(function(){var y=[].indexOf||function(c){for(var g=0,m=this.length;g<m;g++)if(g in this&&this[g]===c)return g;return-1},t=[].slice;(function(c,g){return"function"===typeof define&&define.amd?define("waypoints",["jquery"],function(m){return g(m,c)}):g(c.jQuery,c)})(this,function(c,g){var m,u,q,l,v,n,r,h,k,w;m=c(g);r=0<=y.call(g,"ontouchstart");l={horizontal:{},vertical:{}};v=1;n={};w=1;u=function(){function a(b){var a=this;this.$element=b;this.element=b[0];this.didScroll=this.didResize=!1;this.id=
"context"+v++;this.oldScroll={x:b.scrollLeft(),y:b.scrollTop()};this.waypoints={horizontal:{},vertical:{}};b.data("waypoints-context-id",this.id);n[this.id]=this;b.bind("scroll.waypoints",function(){if(!a.didScroll&&!r)return a.didScroll=!0,g.setTimeout(function(){a.doScroll();return a.didScroll=!1},c.waypoints.settings.scrollThrottle)});b.bind("resize.waypoints",function(){if(!a.didResize)return a.didResize=!0,g.setTimeout(function(){c.waypoints("refresh");return a.didResize=!1},c.waypoints.settings.resizeThrottle)})}
a.prototype.doScroll=function(){var b,a=this;b={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};!r||b.vertical.oldScroll&&b.vertical.newScroll||c.waypoints("refresh");c.each(b,function(b,f){var d,e,p;p=[];d=(e=f.newScroll>f.oldScroll)?f.forward:f.backward;c.each(a.waypoints[b],function(b,a){var c,d;if(f.oldScroll<(c=a.offset)&&c<=f.newScroll||
f.newScroll<(d=a.offset)&&d<=f.oldScroll)return p.push(a)});p.sort(function(b,a){return b.offset-a.offset});e||p.reverse();return c.each(p,function(b,a){if(a.options.continuous||b===p.length-1)return a.trigger([d])})});return this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}};a.prototype.refresh=function(){var b,a,d=this;a=c.isWindow(this.element);b=this.$element.offset();this.doScroll();b={horizontal:{contextOffset:a?0:b.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.$element.width(),
oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:a?c.waypoints("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return c.each(b,function(b,a){return c.each(d.waypoints[b],function(b,d){var f,e,g,x;b=d.options.offset;e=d.offset;f=c.isWindow(d.element)?0:d.$element.offset()[a.offsetProp];c.isFunction(b)?b=b.apply(d.element):
"string"===typeof b&&(b=parseFloat(b),-1<d.options.offset.indexOf("%")&&(b=Math.ceil(a.contextDimension*b/100)));d.offset=f-a.contextOffset+a.contextScroll-b;if((!d.options.onlyOnScroll||null==e)&&d.enabled){if(null!==e&&e<(g=a.oldScroll)&&g<=d.offset)return d.trigger([a.backward]);if(null!==e&&e>(x=a.oldScroll)&&x>=d.offset||null===e&&a.oldScroll>=d.offset)return d.trigger([a.forward])}})})};a.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind("resize.waypoints scroll.waypoints"),
delete n[this.id]};return a}();q=function(){function a(b,a,d){var f;d=c.extend({},c.fn.waypoint.defaults,d);"bottom-in-view"===d.offset&&(d.offset=function(){var b;b=c.waypoints("viewportHeight");c.isWindow(a.element)||(b=a.$element.height());return b-c(this).outerHeight()});this.$element=b;this.element=b[0];this.axis=d.horizontal?"horizontal":"vertical";this.callback=d.handler;this.context=a;this.enabled=d.enabled;this.id="waypoints"+w++;this.offset=null;this.options=d;a.waypoints[this.axis][this.id]=
this;l[this.axis][this.id]=this;d=null!=(f=b.data("waypoints-waypoint-ids"))?f:[];d.push(this.id);b.data("waypoints-waypoint-ids",d)}a.prototype.trigger=function(b){if(this.enabled&&(null!=this.callback&&this.callback.apply(this.element,b),this.options.triggerOnce))return this.destroy()};a.prototype.disable=function(){return this.enabled=!1};a.prototype.enable=function(){this.context.refresh();return this.enabled=!0};a.prototype.destroy=function(){delete l[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];
return this.context.checkEmpty()};a.getWaypointsByElement=function(b){var a;b=c(b).data("waypoints-waypoint-ids");if(!b)return[];a=c.extend({},l.horizontal,l.vertical);return c.map(b,function(b){return a[b]})};return a}();k={init:function(a,b){null==b&&(b={});null==b.handler&&(b.handler=a);this.each(function(){var a,d,e;a=c(this);e=null!=(d=b.context)?d:c.fn.waypoint.defaults.context;c.isWindow(e)||(e=a.closest(e));e=c(e);(d=n[e.data("waypoints-context-id")])||(d=new u(e));return new q(a,d,b)});c.waypoints("refresh");
return this},disable:function(){return k._invoke(this,"disable")},enable:function(){return k._invoke(this,"enable")},destroy:function(){return k._invoke(this,"destroy")},prev:function(a,b){return k._traverse.call(this,a,b,function(b,a,c){if(0<a)return b.push(c[a-1])})},next:function(a,b){return k._traverse.call(this,a,b,function(b,a,c){if(a<c.length-1)return b.push(c[a+1])})},_traverse:function(a,b,f){var d,e;null==a&&(a="vertical");null==b&&(b=g);e=h.aggregate(b);d=[];this.each(function(){var b;
b=c.inArray(this,e[a]);return f(d,b,e[a])});return this.pushStack(d)},_invoke:function(a,b){a.each(function(){var a;a=q.getWaypointsByElement(this);return c.each(a,function(a,c){c[b]();return!0})});return this}};c.fn.waypoint=function(){var a,b;b=arguments[0];a=2<=arguments.length?t.call(arguments,1):[];return k[b]?k[b].apply(this,a):c.isFunction(b)?k.init.apply(this,arguments):c.isPlainObject(b)?k.init.apply(this,[null,b]):b?c.error("The "+b+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")};
c.fn.waypoint.defaults={context:g,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1};h={refresh:function(){return c.each(n,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return null!=(a=g.innerHeight)?a:m.height()},aggregate:function(a){var b,f,d;b=l;a&&(b=null!=(d=n[c(a).data("waypoints-context-id")])?d.waypoints:void 0);if(!b)return[];f={horizontal:[],vertical:[]};c.each(f,function(a,d){c.each(b[a],function(a,b){return d.push(b)});d.sort(function(a,b){return a.offset-
b.offset});f[a]=c.map(d,function(a){return a.element});return f[a]=c.unique(f[a])});return f},above:function(a){null==a&&(a=g);return h._filter(a,"vertical",function(a,c){return c.offset<=a.oldScroll.y})},below:function(a){null==a&&(a=g);return h._filter(a,"vertical",function(a,c){return c.offset>a.oldScroll.y})},left:function(a){null==a&&(a=g);return h._filter(a,"horizontal",function(a,c){return c.offset<=a.oldScroll.x})},right:function(a){null==a&&(a=g);return h._filter(a,"horizontal",function(a,
c){return c.offset>a.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(a,b){return k[a]=b},_invoke:function(a){var b;b=c.extend({},l.vertical,l.horizontal);return c.each(b,function(b,c){c[a]();return!0})},_filter:function(a,b,f){var d,e;d=n[c(a).data("waypoints-context-id")];if(!d)return[];e=[];c.each(d.waypoints[b],function(a,b){if(f(d,b))return e.push(b)});e.sort(function(a,
b){return a.offset-b.offset});return c.map(e,function(a){return a.element})}};c.waypoints=function(){var a,b;b=arguments[0];a=2<=arguments.length?t.call(arguments,1):[];return h[b]?h[b].apply(null,a):h.aggregate.call(null,b)};c.waypoints.settings={resizeThrottle:100,scrollThrottle:30};return m.load(function(){return c.waypoints("refresh")})})}).call(this);